/* ===== Playmobil Animals â€” Animated Theme ===== */
:root{
  --bg:#0e1220; --panel:#131830; --muted:#97a0be; --text:#f2f5ff;
  --brand:#ffd94d; --accent:#ff6b6b; --accent-2:#4cd964; --accent-3:#51c4ff;
  --line:#232a52; --chip:#171d3a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:16px/1.45 system-ui, Segoe UI, Roboto, Helvetica, Arial; color:var(--text);
  background:
    radial-gradient(1200px 700px at 10% -20%, #1a2150 0%, rgba(17,20,44,0) 60%),
    radial-gradient(800px 500px at 110% 20%, #0d2a52 0%, rgba(13,42,82,0) 60%),
    linear-gradient(180deg, #0b1023, #0f1326);
  overflow-x:hidden;
}

/* topbar */
.topbar{
  display:flex; align-items:center; gap:12px;
  padding:12px 18px; border-bottom:1px solid var(--line); background:#0b0f1e80;
  backdrop-filter: blur(6px);
  position:sticky; top:0; z-index:20;
}
.brand{font-weight:800; letter-spacing:.2px; display:flex; gap:6px; align-items:center}
.brand .arch{color:#000; background:var(--brand); font-size:20px; border-radius:6px; padding:0 8px}
.ghost{background:transparent; color:var(--muted); border:1px solid var(--line); padding:8px 12px; border-radius:12px; cursor:pointer}
.ghost:hover{border-color:#35408a; color:#dfe6ff}

.toy-pill{
  margin-left:auto; margin-right:8px;
  display:flex; align-items:center; gap:10px;
  padding:8px 12px; border-radius:999px;
  border:1px dashed #2a3473; background:linear-gradient(90deg, #0f1840, #101b44);
  font-weight:700; color:#cfe2ff; cursor:pointer;
}
.toy-pill span{color:var(--brand)}

/* animated skies */
.skies{position:absolute; inset:0; pointer-events:none}
.cloud{position:absolute; width:120px; height:44px; background:#fff2; border-radius:22px; filter:blur(1px)}
.cloud::before,.cloud::after{content:""; position:absolute; background:#fff2; border-radius:50%}
.cloud::before{width:44px;height:44px;left:-10px;top:-12px}
.cloud::after{width:36px;height:36px;right:-8px;top:-8px}
.c1{top:8px; left:-140px; animation:drift 60s linear infinite}
.c2{top:28px; left:-180px; animation:drift 80s linear infinite reverse}
.c3{top:52px; left:-220px; animation:drift 70s linear infinite}
@keyframes drift{from{transform:translateX(0)} to{transform:translateX(130vw)}}

/* animal stage */
.animal-stage{
  max-width:1200px; margin:8px auto 0; padding:10px 16px;
  display:grid; grid-template-columns:repeat(4,1fr); gap:12px; position:relative;
}
.stage-tip{grid-column:1 / -1; text-align:center; color:#cfe2ff; opacity:.8; font-size:14px; margin-top:-6px}
.animal{
  width:100%; max-width:230px; aspect-ratio:1/1; margin:auto;
  background:linear-gradient(180deg, #0f1636, #0e1630);
  border:1px solid var(--line); border-radius:20px; padding:10px;
  box-shadow: 0 8px 28px rgba(0,0,0,.25);
  cursor:pointer; transition: transform .12s ease, box-shadow .12s ease;
  animation:float 5s ease-in-out infinite;
}
.animal:hover{transform:translateY(-4px) rotate(-1deg); box-shadow:0 12px 36px rgba(0,0,0,.35)}
.eye{fill:#0b1430; animation:blink 5s infinite}
.tail{transform-origin:0 0; animation:wag 1.2s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)}}
@keyframes blink{0%,90%,100%{transform:scaleY(1)} 92%{transform:scaleY(0.1)} 94%{transform:scaleY(1)}}
@keyframes wag{0%,100%{transform:rotate(0deg)} 50%{transform:rotate(12deg)}}

/* ribbon */
.theme-ribbon{
  overflow:hidden; border-top:1px solid var(--line); border-bottom:1px solid var(--line);
  background:linear-gradient(90deg, rgba(81,196,255,.15), rgba(76,217,100,.15));
}
.theme-ribbon .ribbon-inner{
  display:flex; gap:22px; align-items:center;
  padding:10px 16px; white-space:nowrap; animation:scroll 22s linear infinite;
  font-size:18px;
}
.theme-ribbon .txt{margin:0 8px; font-weight:800; color:#fff}
@keyframes scroll{ from{ transform:translateX(0)} to{ transform:translateX(-50%) } }

/* layout */
.layout{display:grid; grid-template-columns:340px 1fr; gap:16px; padding:16px; max-width:1200px; margin:auto}
.panel,.chat{background:var(--panel); border:1px solid var(--line); border-radius:20px; position:relative}
.sticker{box-shadow: 0 10px 30px rgba(0,0,0,.25)}
.panel{padding:16px}
.panel h2{margin:0 0 10px 0}

.quick-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.quick{
  border:2px dashed #2a3473; background:var(--chip); color:var(--text);
  border-radius:16px; padding:12px; cursor:pointer; text-align:left; font-weight:700;
  transition: transform .06s ease, box-shadow .06s ease;
}
.quick:hover{transform:translateY(-1px)}
.quick:active{transform:translateY(0)}
.quick::after{
  content:""; display:block; height:4px; border-radius:4px; margin-top:8px;
  background:linear-gradient(90deg, var(--brand), var(--accent), var(--accent-3), var(--accent-2));
  opacity:.35;
}

.id-card{margin-top:14px; display:grid; gap:6px}
.id-card input{
  padding:12px; border-radius:12px; border:1px solid var(--line); background:#0f1430; color:var(--text)
}

/* suggestions */
.suggestions{margin:14px 0 0; display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.suggestions span{color:#cfe2ff; opacity:.85}
.chip{
  border:1px solid var(--line); background:#10173a; color:#fff; border-radius:999px; padding:6px 10px;
  font-size:13px; cursor:pointer; transition:transform .08s ease;
}
.chip:hover{transform:translateY(-1px)}

/* KB */
.kb-topics{margin-top:18px}
.kb-topics ul{list-style:none; padding:0; margin:8px 0 0 0; display:grid; gap:8px}
.kb-topics li{
  border:1px solid var(--line); background:#10173a; padding:10px 12px; border-radius:12px; font-size:14px; cursor:pointer;
}
.kb-topics li:hover{transform:translateX(2px)}

/* chat */
.chat{display:flex; flex-direction:column;}
.chat-log{padding:16px; display:flex; flex-direction:column; gap:10px; overflow:auto; max-height:70vh}
.msg{max-width:80%; padding:12px 14px; border-radius:14px; border:1px solid var(--line); animation:pop .18s ease}
@keyframes pop{from{transform:scale(.98); opacity:.0} to{transform:scale(1); opacity:1}}
.bot{background:#0e1636}
.user{background:#0b1430; margin-left:auto}
.msg p{margin:.35em 0}
.msg code{background:#0a1430; padding:2px 6px; border-radius:6px; border:1px solid #1b2660}
.tiny-pill{display:inline-block; padding:2px 8px; border-radius:999px; margin-left:6px; background:linear-gradient(90deg,var(--brand),var(--accent)); color:#000; font-weight:900}

/* chat input */
.chat-input{display:flex; gap:8px; padding:12px; border-top:1px solid var(--line)}
.chat-input input{
  flex:1; padding:12px; border-radius:12px; border:1px solid var(--line); background:#0f1430; color:var(--text)
}
.chat-input button{
  padding:12px 16px; border-radius:12px; border:0; background:linear-gradient(90deg,var(--brand),var(--accent-3)); color:#000; font-weight:800; cursor:pointer
}

/* drawer */
.drawer{
  position:fixed; right:-420px; top:0; width:420px; height:100dvh; background:#0f1430; border-left:1px solid var(--line);
  box-shadow: -8px 0 30px rgba(0,0,0,.35); z-index:30; transition:right .2s ease;
  display:flex; flex-direction:column;
}
.drawer.open{right:0}
.drawer header{display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid var(--line)}
.toy-grid{padding:12px; display:grid; grid-template-columns:1fr; gap:10px; overflow:auto}
.toy-card{
  border:1px solid var(--line); border-radius:14px; padding:12px; background:#10173a;
  display:grid; grid-template-columns:48px 1fr; gap:10px; align-items:center; cursor:pointer;
  transition:transform .08s ease, background .15s ease;
}
.toy-card:hover{transform:translateX(2px); background:#0e1636}
.toy-emoji{font-size:28px}

.corner-sticker{
  position:fixed; z-index:0; font-size:46px; opacity:.25; filter:drop-shadow(0 4px 10px rgba(0,0,0,.25));
  user-select:none; pointer-events:none;
}
.corner-sticker.tl{top:8px; left:8px; transform:rotate(-12deg)}
.corner-sticker.br{bottom:12px; right:12px; transform:rotate(10deg)}

/* admin modal */
dialog::backdrop{background:rgba(0,0,0,.45)}
.admin{min-width:720px; background:#0f1430; border:1px solid var(--line); border-radius:14px; padding:0}
.admin header{display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid var(--line)}
.admin section{padding:12px 16px; border-top:1px dashed #2a3473}
.row{display:flex; gap:8px; flex-wrap:wrap}
.row input, .row select{padding:10px; border-radius:10px; border:1px solid var(--line); background:#10173a; color:var(--text)}
.row button{padding:10px 14px; border-radius:10px; border:1px solid var(--line); background:#162050; color:var(--text); cursor:pointer}
#empTable{margin-top:10px; border:1px solid var(--line); border-radius:10px; overflow:hidden}
#empTable table{width:100%; border-collapse:collapse}
#empTable th, #empTable td{border-bottom:1px solid var(--line); padding:8px 10px; text-align:left}
#empTable tr:last-child td{border-bottom:0}

.foot{max-width:1200px; margin:16px auto; padding:0 16px; color:var(--muted)}
@media (max-width: 1000px){
  .animal-stage{grid-template-columns:repeat(2,1fr)}
  .layout{grid-template-columns:1fr}
  .admin{min-width:auto; width:95vw}
}

/* FX canvas full-bleed */
#fx{position:fixed; inset:0; width:100vw; height:100vh; z-index:5; pointer-events:none}
